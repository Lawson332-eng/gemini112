<!--pages/history/history.wxml-->
<view class="container history-page">
  <view class="header-section">
    <text class="page-title gradient-text">тЇатЇюУ«░тйЋ</text>
    <button wx:if="{{historyList.length > 0}}" class="clear-btn" bindtap="clearHistory">ТИЁуЕ║</button>
  </view>

  <view wx:if="{{historyList.length === 0}}" class="empty-state">
    <text class="empty-icon">­ЪЊю</text>
    <text class="empty-text">ТџѓТЌатЇатЇюУ«░тйЋ</text>
    <text class="empty-hint">т╝ђтДІСйауџёуггСИђТгАтАћуйЌтЇатЇютљД</text>
  </view>

  <scroll-view wx:else scroll-y class="history-list">
    <view class="history-item glass-card" wx:for="{{historyList}}" wx:key="timestamp" bindtap="viewDetail" data-index="{{index}}">
      <view class="item-header">
        <text class="item-type">{{item.type === 'single' ? 'тЇЋуЅїтЇатЇю' : 'СИЅуЅїжўхтЇатЇю'}}</text>
        <text class="item-time">{{item.relativeTime}}</text>
      </view>

      <view class="item-cards">
        <view class="mini-preview" wx:for="{{item.cards}}" wx:for-item="card" wx:key="id">
          <text class="preview-num">{{card.number}}</text>
          <text class="preview-name">{{card.name}}</text>
        </view>
      </view>

      <view class="item-actions">
        <button class="delete-btn" catchtap="deleteRecord" data-timestamp="{{item.timestamp}}">тѕажЎц</button>
      </view>
    </view>
  </scroll-view>
</view>
